<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hands-on with kube-burner :: OpenShift performance benchmarking guide</title>
    <link rel="prev" href="section2.html">
    <link rel="next" href="../chapter6/index.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">OpenShift performance benchmarking guide</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/ocp-perf-benchmarking/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ocp-perf-benchmarking" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">OpenShift performance benchmarking guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter1/index.html">Introduction to Performance Benchmarking</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section1.html">Kubernetes/OpenShift performance landscape</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../chapter2/index.html">Monitoring OpenShift Performance with the Built-in Stack</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter3/index.html">Overview of Benchmarking Suites</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter3/section1.html">Kubernetes-native benchmarking tools</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter4/index.html">Understanding Openshift Networking</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter4/section1.html">Understanding OVN-Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter4/section2.html">Network Performance Testing with k8s-netperf</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter4/section3.html">Ingress Controller Benchmarking and Analysis</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Control Plane and Scalability Testing with kube-burner</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section1.html">Configuring kube-burner jobs to simulate cluster churn</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section2.html">Measuring Control Plane Responsiveness</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="section3.html">Hands-on with kube-burner</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter6/index.html">Final Review and Key Takeaways</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter6/section1.html">Final review</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix and References</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift performance benchmarking guide</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">OpenShift performance benchmarking guide</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">OpenShift performance benchmarking guide</a></li>
    <li><a href="index.html">Control Plane and Scalability Testing with kube-burner</a></li>
    <li><a href="section3.html">Hands-on with kube-burner</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Hands-on with kube-burner</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we will walk through a practical hands-on activity that illustrates how to use kube-burner for simulating cluster churn and measuring Control Plane responsiveness. This exercise assumes you have basic familiarity with Kubernetes and its command-line interface (kubectl).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites:</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install <code>kube-burner</code> binary or use the container image on your preferred system. Refer to the [installation guide](<a href="https://cloud-bulldozer.github.io/kube-burner/" class="bare">https://cloud-bulldozer.github.io/kube-burner/</a>) for more details.</p>
</li>
<li>
<p>Access a running Kubernetes cluster (either local or cloud-based).</p>
</li>
<li>
<p>Ensure <code>kubectl</code> is configured and can communicate with your target Kubernetes cluster.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_objective"><a class="anchor" href="#_objective"></a>Objective:</h3>
<div class="paragraph">
<p>By the end of this lab activity, you should be able to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure kube-burner jobs to simulate various control plane churn scenarios.</p>
</li>
<li>
<p>Measure and observe the control plane&#8217;s responsiveness under stress.</p>
</li>
<li>
<p>Analyze test results and interpret key performance metrics.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_by_step_hands_on_activity"><a class="anchor" href="#_step_by_step_hands_on_activity"></a>Step-by-step Hands-on Activity:</h3>
<div class="sect3">
<h4 id="_1_setting_up_kube_burner_configuration_files"><a class="anchor" href="#_1_setting_up_kube_burner_configuration_files"></a>1. Setting up kube-burner configuration files</h4>
<div class="paragraph">
<p>kube-burner uses YAML configuration files to define jobs, which dictate the resources it will create, delete, or manipulate in your Kubernetes cluster. You can find example configuration files and metrics profiles in the [kube-burner examples directory](<a href="https://github.com/cloud-bulldozer/kube-burner/tree/master/examples" class="bare">https://github.com/cloud-bulldozer/kube-burner/tree/master/examples</a>).</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start by creating a simple <code>job.yaml</code> file to simulate control plane churn:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: kubeburner.cloud-bulldozer.io/v1alpha1
kind: Job
metadata:
  name: controlplane-churn-job
spec:
  # Specify the type of resource you want to test
  resources:
    - kind: Deployment
  # Define the number of operations for each kind of resource
  operations:
    - name: Create
      count: 10
    - name: Update
      count: 10
    - name: Delete
      count: 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration instructs kube-burner to create, update, and delete 10 Kubernetes Deployments. Adjust the <code>count</code> values as needed for your specific testing requirements.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_running_kube_burner_job"><a class="anchor" href="#_2_running_kube_burner_job"></a>2. Running kube-burner job</h4>
<div class="paragraph">
<p>Now that we have a configuration file ready, let&#8217;s run our job against the target Kubernetes cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f job.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>kube-burner will start creating, updating, and deleting Deployments according to your <code>job.yaml</code> specifications. You can monitor the progress using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl -n kube-burner logs &lt;pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;pod-name&gt;</code> with the name of the pod generated by kube-burner for executing the job.</p>
</div>
</div>
<div class="sect3">
<h4 id="_3_measuring_control_plane_responsiveness"><a class="anchor" href="#_3_measuring_control_plane_responsiveness"></a>3. Measuring Control Plane Responsiveness</h4>
<div class="paragraph">
<p>While the job is running, kube-burner will collect Prometheus metrics related to control plane components (kube-apiserver, etcd, etc.). To view these metrics, set up Grafana with a predefined dashboard or use <code>curl</code> to fetch metrics directly from the Kube-API server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl top node &lt;node-name&gt; --format=json | jq '.containers[] | select(.name=="kube-apiserver") | .metrics'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;node-name&gt;</code> with the name of a node in your cluster running kube-apiserver. This command extracts and displays metrics related to kube-apiserver performance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_4_analyzing_results"><a class="anchor" href="#_4_analyzing_results"></a>4. Analyzing Results</h4>
<div class="paragraph">
<p>Once the job completes, analyze the collected Prometheus metrics to evaluate control plane responsiveness under stress. Key metrics to observe include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request latency</p>
</li>
<li>
<p>Error rates (5xx)</p>
</li>
<li>
<p>Throughput</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find more information on interpreting these metrics in kube-burner&#8217;s documentation or through subsequent blog posts (as mentioned in the provided context).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h3>
<div class="paragraph">
<p>This hands-on activity has demonstrated how to configure and run kube-burner jobs for simulating control plane churn and measuring responsiveness. Through practical exercises like this, users can gain valuable insights into Kubernetes cluster performance under stress conditions. Remember to consult the comprehensive [kube-burner documentation](<a href="https://cloud-bulldozer.github.io/kube-burner/" class="bare">https://cloud-bulldozer.github.io/kube-burner/</a>) for more in-depth guidance on using kube-burner&#8217;s features and understanding test results.</p>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="section2.html">Measuring Control Plane Responsiveness</a></span>
  <span class="next"><a href="../chapter6/index.html">Final Review and Key Takeaways</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
